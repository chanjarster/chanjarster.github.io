<!doctype html><html lang="zh-cn" data-palette="blue"
  >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JMX Exporter 规则编写教程 - 颇忒脱的技术博客</title><link rel="apple-touch-icon" href="/images/icons/icon-180x180.png" sizes="180x180">
<link rel="icon" href="/images/icons/icon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/icons/icon-16x16.png" sizes="16x16" type="image/png">
<link rel="icon" href="/images/icons/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="keywords" content="" />
<meta name="description" content="" /><meta name="robots" content="index, follow" /><meta itemprop="name" content="JMX Exporter 规则编写教程">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2023-04-16T15:41:05+08:00" />
<meta itemprop="dateModified" content="2023-04-16T15:41:05+08:00" />
<meta itemprop="wordCount" content="1444">
<meta itemprop="keywords" content="prometheus,java," /><meta property="og:title" content="JMX Exporter 规则编写教程" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/prometheus/jmx-exporter-rule/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-04-16T15:41:05+08:00" />
<meta property="article:modified_time" content="2023-04-16T15:41:05+08:00" /><meta property="og:site_name" content="颇忒脱的技术博客" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JMX Exporter 规则编写教程"/>
<meta name="twitter:description" content=""/>
<meta property="og:image" content="/images/avatar.jpg"/>
  <meta name="twitter:image" content="/images/avatar.jpg"/><link rel="stylesheet" href="/css/main.min.507afbe6e4670fa3e961a0b35816b5daeb36029866fd6bd7b9d7871fcf88faa5.css" integrity="sha256-UHr75uRnD6PpYaCzWBa12us2Aphm/WvXudeHH8&#43;I&#43;qU=" crossorigin="anonymous"><link rel="stylesheet" href="/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css" integrity="sha256-PSKHlLztu/oEEr64&#43;8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin="anonymous"></head>
  <body><script>const items=['mode','palette'];items.forEach(function(a){const b=localStorage.getItem('hbs-'+a);b&&document.body.parentElement.setAttribute('data-'+a,b)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
  <div class="container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button><a class="navbar-brand flex-grow-1 flex-lg-grow-0 text-center text-lg-start mx-auto me-lg-3" href="/"><img class="logo" alt="Logo" src="/images/avatar.jpg" loading="lazy"
   width="455" height="455"
   />
颇忒脱的技术博客
    </a>
    
    <button class="navbar-settings" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings"
  aria-controls="offcanvasSettings" aria-label="Toggle settings">
  <i class="fas fa-ellipsis-v"></i>
</button>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasSettings">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">设置</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body d-flex flex-column">

<section class="setting">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-adjust"></i> 模式</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="modeSwitcher">
      </div>
    </div>
  </form>
</section>

<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> 字体大小</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>


<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> 配色</label>
    </div>
    <div class="col-auto ms-auto">
      <a id="btnPalette" class="btn btn-sm btn-outline-primary" role="button" aria-label="palettePicker">
        <i class="fas fa-eye-dropper"></i>
      </a>
    </div>
  </form>
  <div class="mt-2 d-flex justify-content-between visually-hidden" id="palettePicker"><button type="button" id="palette-blue" aria-label="蓝色"
        class="btn btn-sm w-100 palette" data-palette="blue">
      </button><button type="button" id="palette-blue-gray" aria-label="蓝灰色"
        class="btn btn-sm w-100 palette" data-palette="blue-gray">
      </button><button type="button" id="palette-brown" aria-label="棕色"
        class="btn btn-sm w-100 palette" data-palette="brown">
      </button><button type="button" id="palette-cyan" aria-label="青色"
        class="btn btn-sm w-100 palette" data-palette="cyan">
      </button><button type="button" id="palette-green" aria-label="绿色"
        class="btn btn-sm w-100 palette" data-palette="green">
      </button><button type="button" id="palette-indigo" aria-label="靛青色"
        class="btn btn-sm w-100 palette" data-palette="indigo">
      </button><button type="button" id="palette-orange" aria-label="橙色"
        class="btn btn-sm w-100 palette" data-palette="orange">
      </button><button type="button" id="palette-pink" aria-label="粉色"
        class="btn btn-sm w-100 palette" data-palette="pink">
      </button><button type="button" id="palette-purple" aria-label="紫色"
        class="btn btn-sm w-100 palette" data-palette="purple">
      </button><button type="button" id="palette-red" aria-label="红色"
        class="btn btn-sm w-100 palette" data-palette="red">
      </button><button type="button" id="palette-teal" aria-label="蓝绿色"
        class="btn btn-sm w-100 palette" data-palette="teal">
      </button><button type="button" id="palette-yellow" aria-label="黄色"
        class="btn btn-sm w-100 palette" data-palette="yellow">
      </button></div>
</section>
<section class="setting actions d-flex justify-content-around mt-auto overflow-auto">
  <a role="button" class="action action-go-back" href="javascript: window.history.back();">
    <span class="action-icon"><i class="fas fa-2x fa-arrow-left"></i></span> 返回
  </a>
  <a role="button" class="action action-reload-page">
    <span class="action-icon"><i class="fas fa-2x fa-redo-alt"></i></span> 刷新
  </a>
  <a role="button" class="action action-copy-url">
    <span class="action-icon"><i class="fas fa-2x fa-link"></i></span> 复制链接
  </a></section>

</div>
</div>

    <div class="collapse navbar-collapse" tabindex="-1" id="navbarSupportedContent" aria-labelledby="navbarSupportedContent">
      <form class="search-bar my-1" action="/search">
  <div class="input-group input-group-sm">
    <span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
    <input class="form-control rounded-pill" name="q" type="search" aria-label="Search">
  </div>
</form>
      <ul class="navbar-nav ms-auto"><li class="nav-item">
          <a class="nav-link" href="/series/">
            <i class="fas fa-fw fa-columns"></i>专栏
          </a>
        </li><li class="nav-item dropdown">
          <a class="nav-link" id="navbarDropdownIndex" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-fw fa-chevron-circle-down"></i>快速索引
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownIndex"><li>
              <a class="dropdown-item"
                href="/tags/go">
                Go
              </a>
            </li><li>
              <a class="dropdown-item"
                href="/tags/gc">
                GC
              </a>
            </li><li>
              <a class="dropdown-item"
                href="/tags/kernel">
                Kernel
              </a>
            </li><li>
              <a class="dropdown-item"
                href="/tags/cheatsheet">
                Cheatsheet
              </a>
            </li><li>
              <a class="dropdown-item"
                href="/tags/troubleshooting">
                排障实战记录
              </a>
            </li></ul>
        </li><li class="nav-item">
          <a class="nav-link" href="/tags/">
            <i class="fas fa-fw fa-tags"></i>标签
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/archives/">
            <i class="fas fa-fw fa-file-archive"></i>归档
          </a>
        </li></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><nav class="row card component" aria-label="breadcrumb">
  <div class="card-body">
    <ol class="breadcrumb "><li class="breadcrumb-item"><a href="/">主页</a></li><li class="breadcrumb-item"><a href="/post/">文章</a></li><li class="breadcrumb-item active">JMX Exporter 规则编写教程</li></ol>
  </div>
</nav><div class="post-panel-wrapper">
  <div class="d-flex flex-column component rounded post-panel">
    
    <a class="action action-panel-toggler" role="button" title="Panel toggler">
      <i class="fas fa-fw fa-chevron-circle-down"></i>
    </a>
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button" title="Sidebar toggler">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>

    

    
    <a class="action" href="#post-copyright" role="button" aria-label="Copyright" title="Copyright">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    <a class="action" href="#post-comments" role="button" aria-label="Comments" title="Comments">
  <i class="fas fa-fw fa-comments"></i>
</a>
    <a class="action" href="#postTOC" aria-controls="Table of contents" role="button" title="Table of contents">
  <i class="fas fa-fw fa-list-alt"></i>
</a>
    
  </div>
</div>
<article class="row card component mb-4 post">
  <div class="card-header ">
    <h1 class="card-title post-title">JMX Exporter 规则编写教程
</h1>
  </div>
  <div class="card-body"><div class="post-meta">
  <span class="post-date" title="创建于 2023-04-16 15:41:05 &#43;0800 CST。">
    2023-04-16
  </span><span class="post-reading-time">
    3 分钟阅读
  </span><span class="post-taxonomies"><a href="/tags/prometheus/" class="badge post-taxonomy">prometheus</a><a href="/tags/java/" class="badge post-taxonomy">java</a></span>
</div>
<div class="post-content mb-3"><p><a href="https://github.com/prometheus/jmx_exporter" target="_blank" rel="noopener noreferrer">JMX Exporter</a> 是 Prometheus 官方提供的一种无侵入的，将 JMX MBean 信息转换成 Prometheus 指标数据的工具。</p>
<p>其配置使用具有一定的门槛，这篇文章介绍怎样看懂、会写配置文件。</p>
<h2 id="浏览-mbean">浏览 MBean<a class="anchor ms-1" href="#浏览-mbean"><i class="fas fa-link"></i></a></h2>
<p>在你的电脑上打开 jvisualvm，下图里连接了 Tomcat 程序。</p>
<img src="01.jpg" style="zoom:50%" />
<p>切换到 MBeans Tab，可以看到屏幕左边是 MBeans 清单，选择一个 MBean 之后在右侧可以看到它的属性。</p>
<img src="ex1-02.jpg" style="zoom:50%" />
<h2 id="mbean-属性转换规则">MBean 属性转换规则<a class="anchor ms-1" href="#mbean-属性转换规则"><i class="fas fa-link"></i></a></h2>
<p>下面通过三个例子来介绍 JMX Exporter 是如何转换 MBean 信息的，这很重要，如果没有掌握就无法编写 JMX Exporter 配置文件。</p>
<h3 id="例子一">例子一<a class="anchor ms-1" href="#例子一"><i class="fas fa-link"></i></a></h3>
<p>选中一个 MBean 之后，点击右侧的 Metadata Tab 可以看到各种元信息：</p>
<img src="ex1-03.jpg" style="zoom:50%" />
<p>这里我们关注 MBeanInfo 的 ObjectName 信息，和 MBeanAttributeInfo 的 Name 信息，见下图：</p>
<img src="ex1-convert.jpg" style="zoom:50%" />
<p>图中的最后一行就是 JMX 的转换结果，在 JMX Exporter 里：</p>
<ul>
<li>把 ObjectName 中 <code>:</code> 前面的部分被当作 domain</li>
<li>把 ObjectName 中 <code>:</code> 后面的部分被当作 bean property name/value</li>
<li>然后跟上一个空的 <code>&lt;&gt;</code>，这个在第三个例子里有解释</li>
<li>然后跟上属性名</li>
<li>然后跟一个 <code>: </code>（注意后面有空格）</li>
<li>最后跟上值</li>
</ul>
<h3 id="例子二">例子二<a class="anchor ms-1" href="#例子二"><i class="fas fa-link"></i></a></h3>
<p>我们换一个 MBean ，可以看到它有多个属性：</p>
<img src="ex2-01.jpg" style="zoom:50%" />
<p>转换过程：</p>
<img src="ex2-convert.jpg" style="zoom:50%" />
<p>注意：转换后的 bean property name/value 的顺序和原始顺序是一致的。</p>
<h3 id="例子三">例子三<a class="anchor ms-1" href="#例子三"><i class="fas fa-link"></i></a></h3>
<p>下面讲当 MBean 的某个属性是 <a href="https://docs.oracle.com/cd/E19698-01/816-7609/openmbean-4/index.html" target="_blank" rel="noopener noreferrer"><code>CompositeData</code></a> 或者 <code>TabularData</code> 时怎么转换。</p>
<p>下图中 <code>ApplicationRuntime</code> 这个 MBean 的 <code>OverallHealthStateJMX</code> 属性是 <code>CompositeDataSupport</code> 类型：</p>
<img src="ex3-01.jpg" style="zoom:50%" />
<p>双击点开 <code>OverallHealthStateJMX</code> 属性可以看到它有这么些 Key：</p>
<img src="ex3-02.jpg" style="zoom:50%" />
<p>那么进入 Metadata Tab 观察 MBeanInfo 的 ObjectName：</p>
<img src="ex3-03.jpg" style="zoom:50%" />
<p>那么 JMX Exporter 会做如下的转换：</p>
<img src="ex3-convert.jpg" style="zoom:50%" />
<p>注意：前两个例子中的空的 <code>&lt;&gt;</code> 里面有了 <code>IsCritical</code> 属性。</p>
<h3 id="总结转换规则">总结转换规则<a class="anchor ms-1" href="#总结转换规则"><i class="fas fa-link"></i></a></h3>
<p>再来核对<a href="https://github.com/prometheus/jmx_exporter#pattern-input" target="_blank" rel="noopener noreferrer">官方文档</a>的描述：</p>
<blockquote>
<p>domain&lt;beanPropName1=propValue1, beanPropName2=propValue2, &hellip;&gt;&lt;key1, key2, &hellip;&gt;attrName: value</p>
</blockquote>
<table>
<thead>
<tr>
<th>Part</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>domain</td>
<td>Bean name. This is the part before the colon in the JMX object name.</td>
</tr>
<tr>
<td>beanPropName/Value</td>
<td>Bean properties. These are the key/values after the colon in the JMX object name.</td>
</tr>
<tr>
<td>keyN</td>
<td>If composite or tabular data is encountered, the name of the attribute is added to this list.</td>
</tr>
<tr>
<td>attrName</td>
<td>The name of the attribute. For tabular data, this will be the name of the column. If <code>attrNameSnakeCase</code> is set, this will be converted to snake case.</td>
</tr>
<tr>
<td>value</td>
<td>The value of the attribute.</td>
</tr>
</tbody>
</table>
<p>翻译一下就是：</p>
<ul>
<li>把 ObjectName 中 <code>:</code> 前面的部分被当作 domain</li>
<li>把 ObjectName 中 <code>:</code> 后面的部分被当作 bean property name/value</li>
<li>当 MBean 属性 是 <a href="https://docs.oracle.com/cd/E19698-01/816-7609/openmbean-4/index.html" target="_blank" rel="noopener noreferrer"><code>CompositeData</code></a> 或者 <code>TabularData</code> 时，会跟上 <code>&lt;key&gt;</code>，key 是 MBean 属性数据里的 key
<ul>
<li>如果不是，则跟上一个空的 <code>&lt;&gt;</code></li>
</ul>
</li>
<li>然后跟上属性名</li>
<li>然后跟一个 <code>: </code>（注意后面有空格）</li>
<li>最后跟上值</li>
</ul>
<h2 id="配置文件说明">配置文件说明<a class="anchor ms-1" href="#配置文件说明"><i class="fas fa-link"></i></a></h2>
<p>知道了 JMX Exporter 会把 MBean 转换成什么样，那么就容易理解配置文件的其他部分了：</p>
<p>结合下面的配置文件例子来说：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">lowercaseOutputName</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">lowercaseOutputLabelNames</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">whitelistObjectNames</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;org.apache.cassandra.metrics:*&#34;</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="nt">blacklistObjectNames</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;org.apache.cassandra.metrics:type=ColumnFamily,*&#34;</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="nt">pattern: &#39;org.apache.cassandra.metrics&lt;type=(\w+), name=(\w+)&gt;&lt;&gt;Value</span><span class="p">:</span><span class="w"> </span><span class="l">(\d+)&#39;</span><span class="w">
</span><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">cassandra_$1_$2</span><span class="w">
</span><span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">$3</span><span class="w">
</span><span class="w">    </span><span class="nt">valueFactor</span><span class="p">:</span><span class="w"> </span><span class="m">0.001</span><span class="w">
</span><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span><span class="w">    </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Cassandra metric $1 $2&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">GAUGE</span><span class="w">
</span><span class="w">    </span><span class="nt">attrNameSnakeCase</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>lowercaseOutputName</td>
<td>把结果指标名转小写，指标名字是 <code>rules[*].name</code> 指定。</td>
</tr>
<tr>
<td>lowercaseOutputLabelNames</td>
<td>把结果指标的 label 名转小写，label 由 <code>rules[*].labels</code> 指定。</td>
</tr>
<tr>
<td>whitelistObjectNames</td>
<td>JMX MBean <a href="https://docs.oracle.com/javase/6/docs/api/javax/management/ObjectName.html" target="_blank" rel="noopener noreferrer">Object Name</a>（格式详咨文档）白名单，默认是所有 MBean。</td>
</tr>
<tr>
<td>blacklistObjectNames</td>
<td>JMX MBean <a href="https://docs.oracle.com/javase/6/docs/api/javax/management/ObjectName.html" target="_blank" rel="noopener noreferrer">Object Name</a>（格式详咨文档）黑名单，优先级比白名单高，默认是空。</td>
</tr>
<tr>
<td>rules</td>
<td>MBean 属性转换规则数组。对于每个 MBean 属性，遇到第一个匹配的规则后处理流程就结束。没有匹配到的 MBean 属性 则会被丢弃。如果规则数组没提供，则按照默认规则处理所有 MBean 属性。</td>
</tr>
<tr>
<td>pattern</td>
<td>匹配 MBean 属性转换结果的正则表达式，可以使用 capture，默认是匹配任何字符串。注意匹配的是 <code>attrNameSnakeCase</code> 之后的结果。</td>
</tr>
<tr>
<td>attrNameSnakeCase</td>
<td>在 MBean 属性转换过程中，是否对属性名转换成 snake case，比如 <code>anAttrName</code> 转换成 <code>an\_attr\_name</code>，默认是 false。</td>
</tr>
<tr>
<td>name</td>
<td>指标名字，可以使用 <code>pattern</code> 中的 capture group。默认为默认格式（就是前面提到的转换规则）。如果结果是空，则丢弃。</td>
</tr>
<tr>
<td>value</td>
<td>指标值，可以是静态值，也可以从 <code>pattern</code> 的 capture group 提取，默认为 MBean 属性的值。</td>
</tr>
<tr>
<td>valueFactor</td>
<td>可选的 <code>value</code> 的乘数，比如把毫秒值转换成秒值。</td>
</tr>
<tr>
<td>labels</td>
<td>一个 label 的 map（名字 -&gt; 值），可以使用 <code>pattern</code> 的 capture group。</td>
</tr>
<tr>
<td>help</td>
<td>指标的 help 信息，可以使用 <code>pattern</code> 的 capture group，默认是 MBean 属性的描述、domain、属性名。</td>
</tr>
<tr>
<td>cache</td>
<td>Whether to cache bean name expressions to rule computation (match and mismatch). Not recommended for rules matching on bean value, as only the value from the first scrape will be cached and re-used. This can increase performance when collecting a lot of mbeans. Defaults to <code>false</code>.</td>
</tr>
<tr>
<td>type</td>
<td>指标数据类型，可以是 <code>GAUGE</code>、<code>COUNTER</code> 或者 <code>UNTYPED</code>（默认值）。</td>
</tr>
</tbody>
</table>
<p>另外，指标名和 label 名字都被清洗过的，不在<code>[a-zA-Z0-9:_]</code>内的字符统统都会被替换成 <code>_</code>，连续的多个 <code>_</code> 会被压缩成一个 <code>_</code>。</p>
<p>JMX Exporter 还提供了很多 <a href="https://github.com/prometheus/jmx_exporter/tree/main/example_configs" target="_blank" rel="noopener noreferrer">配置文件样例</a>，从 tomcat 到 kafka 都有。</p></div></div>
  <div class="card-footer"><div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-prev">
    <i class="fas fa-fw fa-chevron-left"></i>
    <a href="/post/k8s/cgroup-leak-problem/">Cgroup 内存泄漏导致容器无法创建的问题
</a>
  </div><div class="post-nav post-next">
    <a href="/post/prometheus/events-metrics-design/">Prometheus 事件发生次数类指标设计的考量
</a>
    <i class="fas fa-fw fa-chevron-right"></i>
  </div></div></div>
</article><div class="post-copyright mb-3 row card component" id="post-copyright">
    <div class="card-header">
        <h2 class="card-title">版权</h2>
    </div>
    <div class="card-body"><a class="d-flex align-items-center flex-column" target="_blank" rel="license noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">
  <span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
  CC BY-NC-ND 4.0 
</a>


    </div>
</div><section class="related-posts row card component">
    <div class="card-header">
      <h2 class="card-title">相关文章</h2>
    </div>
    <div class="card-body">
      <ul class="post-list"><li>
          <a href="/post/prometheus/prom-alert-jvm/">使用Prometheus&#43;Alertmanager告警JVM异常情况
</a>
          <span class="float-end post-date">2018-10-26
</span>
        </li><li>
          <a href="/post/prometheus/prom-grafana-jvm/">使用Prometheus&#43;Grafana监控JVM
</a>
          <span class="float-end post-date">2018-10-24
</span>
        </li><li>
          <a href="/post/prometheus/cluster-arch-compare/">Prometheus 集群架构方案对比分析
</a>
          <span class="float-end post-date">2023-01-06
</span>
        </li><li>
          <a href="/post/java-create-zombie-in-docker2/">容器中Java进程产生大量僵尸进程的问题（续）
</a>
          <span class="float-end post-date">2022-04-07
</span>
        </li><li>
          <a href="/post/java-create-zombie-in-docker/">容器中Java进程产生大量僵尸进程的问题
</a>
          <span class="float-end post-date">2022-01-26
</span>
        </li></ul>
    </div>
  </section><div class="card component row post-comments" id="post-comments">
  <div class="card-header">
    <h2 class="card-title">评论</h2>
  </div>
  <div class="card-body"></div>
</div></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container d-flex flex-column">
    
    <section class="card row text-center profile component">
  <div class="card-body">
    <div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="颇忒脱" src="/images/avatar.jpg" loading="lazy"
   width="455" height="455"
   />
</div>
    <div class="col-12 profile-meta"><div class="profile-name">颇忒脱</div><nav class="social-links nav justify-content-center"><a class="nav-link social-link" target="_blank" href="https://github.com/chanjarster" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a></nav>
</div>
  </div>
</section>
  <div class="post-toc row mb-4 card component" id="postTOC">
  <div class="card-header">
    <h2 class="card-title">目录</h2>
  </div>
  <div class="card-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#浏览-mbean">浏览 MBean</a></li>
    <li><a href="#mbean-属性转换规则">MBean 属性转换规则</a>
      <ul>
        <li><a href="#例子一">例子一</a></li>
        <li><a href="#例子二">例子二</a></li>
        <li><a href="#例子三">例子三</a></li>
        <li><a href="#总结转换规则">总结转换规则</a></li>
      </ul>
    </li>
    <li><a href="#配置文件说明">配置文件说明</a></li>
  </ul>
</nav>
  </div>
</div><section class="featured-posts row card component">
    <div class="card-header">
      <h2 class="card-title">精选文章</h2>
    </div>
    <div class="card-body">
      <ul class="post-list"><li>
          <a href="/post/linux/namespace/index-page/">Linux Namespace系列
</a>
        </li><li>
          <a href="/post/network/index-page/">Networking系列
</a>
        </li><li>
          <a href="/post/mysql/index-page/">MySQL系列
</a>
        </li><li>
          <a href="/post/concurrent-programming/index-page/">并发编程系列
</a>
        </li><li>
          <a href="/post/jvm/index-page/">JVM系列
</a>
        </li></ul>
    </div>
  </section><section class="recent-posts row card component">
  <div class="card-header">
    <h2 class="card-title">最近文章</h2>
  </div>
  <div class="card-body">
    <ul class="post-list"><li>
        <a href="/post/prometheus/events-metrics-design/">Prometheus 事件发生次数类指标设计的考量
</a>
      </li><li>
        <a href="/post/prometheus/jmx-exporter-rule/">JMX Exporter 规则编写教程
</a>
      </li><li>
        <a href="/post/k8s/cgroup-leak-problem/">Cgroup 内存泄漏导致容器无法创建的问题
</a>
      </li><li>
        <a href="/post/network/tuning-articles/">网络调优文章精粹
</a>
      </li><li>
        <a href="/post/nginx/throughput-cutoff-half-mystery/">Nginx 反向代理吞吐量砍半之谜
</a>
      </li></ul>
  </div>
</section><section class="tags-taxonomies row card component">
      <div class="card-header">
        <h2 class="card-title">
          <a href="/tags">标签</a>
        </h2>
      </div>
      <div class="card-body">
        <div class="py-2"><a href="/tags/arts-a/" class="badge rounded post-taxonomy" title="ARTS-A">
            ARTS-A<span class="badge badge-sm text-white bg-accent ms-1">125</span></a><a href="/tags/k8s/" class="badge rounded post-taxonomy" title="k8s">
            k8s<span class="badge badge-sm text-white bg-accent ms-1">48</span></a><a href="/tags/jvm/" class="badge rounded post-taxonomy" title="jvm">
            jvm<span class="badge badge-sm text-white bg-accent ms-1">39</span></a><a href="/tags/troubleshooting/" class="badge rounded post-taxonomy" title="troubleshooting">
            troubleshooting<span class="badge badge-sm text-white bg-accent ms-1">34</span></a><a href="/tags/docker/" class="badge rounded post-taxonomy" title="docker">
            docker<span class="badge badge-sm text-white bg-accent ms-1">27</span></a><a href="/tags/mysql/" class="badge rounded post-taxonomy" title="mysql">
            mysql<span class="badge badge-sm text-white bg-accent ms-1">22</span></a><a href="/tags/network/" class="badge rounded post-taxonomy" title="network">
            network<span class="badge badge-sm text-white bg-accent ms-1">22</span></a><a href="/tags/cheatsheet/" class="badge rounded post-taxonomy" title="cheatsheet">
            cheatsheet<span class="badge badge-sm text-white bg-accent ms-1">21</span></a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="badge rounded post-taxonomy" title="并发编程">
            并发编程<span class="badge badge-sm text-white bg-accent ms-1">20</span></a><a href="/tags/kernel/" class="badge rounded post-taxonomy" title="kernel">
            kernel<span class="badge badge-sm text-white bg-accent ms-1">18</span></a><a href="/tags/java/" class="badge rounded post-taxonomy" title="java">
            java<span class="badge badge-sm text-white bg-accent ms-1">17</span></a><a href="/tags/linux/" class="badge rounded post-taxonomy" title="linux">
            linux<span class="badge badge-sm text-white bg-accent ms-1">17</span></a><a href="/tags/prometheus/" class="badge rounded post-taxonomy" title="prometheus">
            prometheus<span class="badge badge-sm text-white bg-accent ms-1">12</span></a><a href="/tags/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/" class="badge rounded post-taxonomy" title="性能调优">
            性能调优<span class="badge badge-sm text-white bg-accent ms-1">11</span></a><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="badge rounded post-taxonomy" title="微服务">
            微服务<span class="badge badge-sm text-white bg-accent ms-1">10</span></a><a href="/tags/go/" class="badge rounded post-taxonomy" title="go">
            go<span class="badge badge-sm text-white bg-accent ms-1">9</span></a><a href="/tags/redis/" class="badge rounded post-taxonomy" title="redis">
            redis<span class="badge badge-sm text-white bg-accent ms-1">8</span></a><a href="/tags/debug/" class="badge rounded post-taxonomy" title="debug">
            debug<span class="badge badge-sm text-white bg-accent ms-1">7</span></a><a href="/tags/gc/" class="badge rounded post-taxonomy" title="gc">
            gc<span class="badge badge-sm text-white bg-accent ms-1">7</span></a><a href="/tags/nginx/" class="badge rounded post-taxonomy" title="nginx">
            nginx<span class="badge badge-sm text-white bg-accent ms-1">7</span></a><a href="/tags/rancher/" class="badge rounded post-taxonomy" title="rancher">
            rancher<span class="badge badge-sm text-white bg-accent ms-1">7</span></a><a href="/tags/ingress/" class="badge rounded post-taxonomy" title="ingress">
            ingress<span class="badge badge-sm text-white bg-accent ms-1">6</span></a><a href="/tags/%E8%BF%90%E7%BB%B4/" class="badge rounded post-taxonomy" title="运维">
            运维<span class="badge badge-sm text-white bg-accent ms-1">6</span></a><a href="/tags/ci_cd/" class="badge rounded post-taxonomy" title="CI_CD">
            CI_CD<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/interview/" class="badge rounded post-taxonomy" title="interview">
            interview<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/jmx/" class="badge rounded post-taxonomy" title="jmx">
            jmx<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" class="badge rounded post-taxonomy" title="分布式事务">
            分布式事务<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/" class="badge rounded post-taxonomy" title="分布式算法">
            分布式算法<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/%E6%94%B6%E8%97%8F%E5%A4%B9/" class="badge rounded post-taxonomy" title="收藏夹">
            收藏夹<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" class="badge rounded post-taxonomy" title="高并发">
            高并发<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href="/tags/openssl/" class="badge rounded post-taxonomy" title="openssl">
            openssl<span class="badge badge-sm text-white bg-accent ms-1">4</span></a><a href="/tags/tls/" class="badge rounded post-taxonomy" title="tls">
            tls<span class="badge badge-sm text-white bg-accent ms-1">4</span></a><a href="/tags/visualvm/" class="badge rounded post-taxonomy" title="visualvm">
            visualvm<span class="badge badge-sm text-white bg-accent ms-1">4</span></a><a href="/tags/%E6%97%A5%E5%BF%97/" class="badge rounded post-taxonomy" title="日志">
            日志<span class="badge badge-sm text-white bg-accent ms-1">4</span></a><a href="/tags/arts/" class="badge rounded post-taxonomy" title="arts">
            arts<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/arts-r/" class="badge rounded post-taxonomy" title="arts-r">
            arts-r<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/classloader/" class="badge rounded post-taxonomy" title="ClassLoader">
            ClassLoader<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/container/" class="badge rounded post-taxonomy" title="container">
            container<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/jenkins/" class="badge rounded post-taxonomy" title="Jenkins">
            Jenkins<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/namespace/" class="badge rounded post-taxonomy" title="namespace">
            namespace<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/scheduling/" class="badge rounded post-taxonomy" title="scheduling">
            scheduling<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/thread/" class="badge rounded post-taxonomy" title="thread">
            thread<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/" class="badge rounded post-taxonomy" title="分布式架构">
            分布式架构<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href="/tags/grafana/" class="badge rounded post-taxonomy" title="grafana">
            grafana<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/jdbc/" class="badge rounded post-taxonomy" title="JDBC">
            JDBC<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/jmeter/" class="badge rounded post-taxonomy" title="jmeter">
            jmeter<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%B6%E5%8C%BA%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/" class="badge rounded post-taxonomy" title="数据库时区那些事儿">
            数据库时区那些事儿<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/%E7%9B%91%E6%8E%A7/" class="badge rounded post-taxonomy" title="监控">
            监控<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/%E9%99%90%E6%B5%81/" class="badge rounded post-taxonomy" title="限流">
            限流<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href="/tags/acloud/" class="badge rounded post-taxonomy" title="acloud">
            acloud<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/akka/" class="badge rounded post-taxonomy" title="Akka">
            Akka<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/alertmanager/" class="badge rounded post-taxonomy" title="alertmanager">
            alertmanager<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/bash/" class="badge rounded post-taxonomy" title="bash">
            bash<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/chrome/" class="badge rounded post-taxonomy" title="chrome">
            chrome<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/coredns/" class="badge rounded post-taxonomy" title="coredns">
            coredns<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/elasticsearch/" class="badge rounded post-taxonomy" title="elasticsearch">
            elasticsearch<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/etcd/" class="badge rounded post-taxonomy" title="etcd">
            etcd<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/fluentd/" class="badge rounded post-taxonomy" title="fluentd">
            fluentd<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/harbor/" class="badge rounded post-taxonomy" title="harbor">
            harbor<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/helm/" class="badge rounded post-taxonomy" title="helm">
            helm<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/hystrix/" class="badge rounded post-taxonomy" title="hystrix">
            hystrix<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/io/" class="badge rounded post-taxonomy" title="io">
            io<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/jdpa/" class="badge rounded post-taxonomy" title="jdpa">
            jdpa<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/jwt/" class="badge rounded post-taxonomy" title="jwt">
            jwt<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/kafka/" class="badge rounded post-taxonomy" title="kafka">
            kafka<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/kibana/" class="badge rounded post-taxonomy" title="kibana">
            kibana<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/mq/" class="badge rounded post-taxonomy" title="MQ">
            MQ<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/nfs/" class="badge rounded post-taxonomy" title="nfs">
            nfs<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/oauth/" class="badge rounded post-taxonomy" title="oauth">
            oauth<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/oracle/" class="badge rounded post-taxonomy" title="Oracle">
            Oracle<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/reactor/" class="badge rounded post-taxonomy" title="reactor">
            reactor<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/spring-boot/" class="badge rounded post-taxonomy" title="spring-boot">
            spring-boot<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/spring-cloud/" class="badge rounded post-taxonomy" title="Spring Cloud">
            Spring Cloud<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/ssl/" class="badge rounded post-taxonomy" title="ssl">
            ssl<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/systemtap/" class="badge rounded post-taxonomy" title="systemtap">
            systemtap<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/tiller/" class="badge rounded post-taxonomy" title="tiller">
            tiller<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/vtable/" class="badge rounded post-taxonomy" title="vtable">
            vtable<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E6%95%B0%E7%A0%81/" class="badge rounded post-taxonomy" title="数码">
            数码<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" class="badge rounded post-taxonomy" title="消息队列">
            消息队列<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E6%B7%B1%E4%BF%A1%E6%9C%8D/" class="badge rounded post-taxonomy" title="深信服">
            深信服<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E7%BC%93%E5%AD%98/" class="badge rounded post-taxonomy" title="缓存">
            缓存<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" class="badge rounded post-taxonomy" title="虚拟化">
            虚拟化<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E8%BF%BD%E8%B8%AA/" class="badge rounded post-taxonomy" title="调用链追踪">
            调用链追踪<span class="badge badge-sm text-white bg-accent ms-1">1</span></a></div>
      </div>
    </section>
    
  </div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav justify-content-center mb-2"><a class="nav-link social-link" target="_blank" href="https://github.com/chanjarster" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a></nav>
<div class="copyright mb-2">
  Copyright © 2010-2023 Daniel Qian. All Rights Reserved.
</div>
<div class="powered-by mb-2">
  Powered by <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer">Hugo</a> and the <a href="https://github.com/razonyang/hugo-theme-bootstrap" target="_blank" rel="noopener noreferrer">Bootstrap</a> theme.
</div>
<a href="https://www.netlify.com" target="_blank" rel="noopener noreferrer">
    <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51" />
</a>
</footer>
<script src="/js/main.2cdce25f280f570596c88888d6af930fe5e15ea030005291dad293defbb231d3.js" integrity="sha256-LNziXygPVwWWyIiI1q&#43;TD&#43;XhXqAwAFKR2tKT3vuyMdM=" crossorigin="anonymous" defer></script><script src="/js/icons.min.8ddcaafc364ff0296c2209c5495287f0de039b852da9b24847f94c198b7639b6.js" integrity="sha256-jdyq/DZP8ClsIgnFSVKH8N4Dm4UtqbJIR/lMGYt2ObY=" crossorigin="anonymous" defer></script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('\/service-worker.js').then(function(reg) {
      console.log('Successfully registered service worker', reg);
    }).catch(function(err) {
      console.warn('Error whilst registering service worker', err);
    });
  });
}
</script><script src="/js/viewer.min.652118a9fbf3403cdfde4026209f97ace22f9e334f0b45a33431a221b3db46a8.js" integrity="sha256-ZSEYqfvzQDzf3kAmIJ&#43;XrOIvnjNPC0WjNDGiIbPbRqg=" crossorigin="anonymous" defer></script>
</body>
</html>
