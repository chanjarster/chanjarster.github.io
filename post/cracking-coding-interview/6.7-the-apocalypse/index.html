<!DOCTYPE html>
<html lang="zh-cn">
<head>

  <meta charset="utf-8" />

  
  <title>Cracking Coding Interview - 6.7 The Apocalypse</title>

  
  





  
  <meta name="author" content="颇忒脱" />
  <meta name="description" content="
" />

  
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@gohugoio" />
    <meta name="twitter:title" content="Cracking Coding Interview - 6.7 The Apocalypse" />
    <meta name="twitter:description" content="
" />
    <meta name="twitter:image" content="https://chanjarster.github.io/img/avatar.jpg" />
  

  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Cracking Coding Interview - 6.7 The Apocalypse" />
  <meta property="og:description" content="
" />
  <meta property="og:url" content="https://chanjarster.github.io/post/cracking-coding-interview/6.7-the-apocalypse/" />
  <meta property="og:image" content="https://chanjarster.github.io/img/avatar.jpg" />




<meta name="generator" content="Hugo 0.49.2" />


<link rel="canonical" href="https://chanjarster.github.io/post/cracking-coding-interview/6.7-the-apocalypse/" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="颇忒脱的技术博客" />
<meta name="msapplication-tooltip" content="颇忒脱的技术博客" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="https://chanjarster.github.io/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="https://chanjarster.github.io/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://chanjarster.github.io/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="https://chanjarster.github.io/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="https://chanjarster.github.io/img/touch-icon-apple.png" />
<link rel="mask-icon" href="https://chanjarster.github.io/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="https://chanjarster.github.io/css/bundle.8e3aef2bc5.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://chanjarster.github.io/img/avatar2.jpg" alt="Avatar">
  
  <h2 class="title">颇忒脱的技术博客</h2>
  
  <p class="subtitle"></p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            
              is-active
            ">
            <a href="https://chanjarster.github.io/">Home</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://chanjarster.github.io/tags/%E6%94%B6%E8%97%8F%E5%A4%B9/">Bookmarks</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://chanjarster.github.io/post/jvm/jvm-index/">JVM</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://chanjarster.github.io/post/concurrent-programming/concurrent-programming-index/">并发编程</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://github.com/chanjarster">Works</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://chanjarster.github.io/tags/">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://chanjarster.github.io/links/">Links</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      

      
      <li class="social-item">
        <a href="//github.com/chanjarster" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a rel="alternate" type="application/rss+xml" href="https://chanjarster.github.io/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">Cracking Coding Interview - 6.7 The Apocalypse</h1>
      <p class="post-meta">@颇忒脱 · Aug 22, 2019 · 2 min read</p>
    </header>
    <article class="post-content"><p></p>

<p><strong>The Apocalypse</strong>: In the new post-apocalyptic world, the world queen is desperately concerned about the birth rate. Therefore, she decrees that all families should ensure that they have one girl or else they face massive fines. If all families abide by this policy-that is, they have continue to have children until they have one girl, at which point they immediately stop-what will the gender ratio of the new generation be? (Assume that the odds of someone having a boy or a girl on any given pregnancy is equal.) Solve this out logically and then write a computer simulation of it.</p>

<p>Hints: #154, #160, #171, #188, #201</p>

<h2 id="解法1">解法1</h2>

<p>国家命令老百姓生孩子，而且一定要生一个女孩。现在已知生男生女的概率相同，都是50%，那么老百姓一直生，直到生到女孩为止，此时的男女比例是多少（排除掉父母计算）。</p>

<p>用B代表男孩，G代表女孩，P(B&hellip;G)代表某种生法的概率：</p>

<p>P(G) = 1/2（每个家庭必定有一个女孩，所以不存在P(B)）</p>

<p>P(BG) = <sup>1</sup>&frasl;<sub>2</sub><sup>2</sup>，第一个生男的概率是0.5，第二个生女的概率是0.5</p>

<p>P(BBG) = <sup>1</sup>&frasl;<sub>2</sub><sup>3</sup></p>

<p>整理一个表格：</p>

<table>
<thead>
<tr>
<th>男孩数量</th>
<th>概率</th>
<th>男孩数量 * 概率</th>
</tr>
</thead>

<tbody>
<tr>
<td>0</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>1</sup></td>
<td>0</td>
</tr>

<tr>
<td>1</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>2</sup></td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>2</sup></td>
</tr>

<tr>
<td>2</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>3</sup></td>
<td><sup>2</sup>&frasl;<sub>2</sub><sup>3</sup></td>
</tr>

<tr>
<td>3</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>4</sup></td>
<td><sup>3</sup>&frasl;<sub>2</sub><sup>4</sup></td>
</tr>

<tr>
<td>4</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>5</sup></td>
<td><sup>4</sup>&frasl;<sub>2</sub><sup>5</sup></td>
</tr>

<tr>
<td>5</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>6</sup></td>
<td><sup>5</sup>&frasl;<sub>2</sub><sup>6</sup></td>
</tr>

<tr>
<td>6</td>
<td><sup>1</sup>&frasl;<sub>2</sub><sup>7</sup></td>
<td><sup>6</sup>&frasl;<sub>2</sub><sup>7</sup></td>
</tr>
</tbody>
</table>

<p>那么平均下来每个家庭有几个男孩呢？把上面Sum（男孩数量 * 概率）：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt"> 1     2     3     4     5     6
-—- + -—- + -—- + -—- + -—- + -—-
 4     8     16    32    64   128</code></pre></div>
<p>把分母都变成128然后计算：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt"> 32    32    24    16    10    6    120
-—- + -—- + -—- + -—- + -—- + -—- = ---
128   128   128   128   128   128   128</code></pre></div>
<p>接近1，所以平均下来每个家庭有1个男孩，那么因为已知每个家庭有1个女孩，那么男女比例接近1:1。男的1是到不了的，只能无限接近。</p>

<p>代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// n: 家庭数量
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">genderRatio</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">int</span> boys <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">int</span> girls <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> genders <span style="color:#f92672">=</span> birth<span style="color:#f92672">();</span>
    boys <span style="color:#f92672">+=</span> genders<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    girls <span style="color:#f92672">+=</span> genders<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
  <span style="color:#f92672">}</span>
  <span style="color:#66d9ef">return</span> boys <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> girls<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">birth</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">int</span> boys <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">int</span> girls <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
  Random random <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>
  <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>girls <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextBoolean</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
      girls<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
      boys<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#f92672">{</span>boys<span style="color:#f92672">,</span> girls<span style="color:#f92672">};</span>
<span style="color:#f92672">}</span></code></pre></div></article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://chanjarster.github.io/tags/arts"><span class="tag">ARTS</span></a></li>
        
          <li><a href="https://chanjarster.github.io/tags/arts-a"><span class="tag">ARTS-A</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        
      </p>
    </footer>
    
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2019 颇忒脱的技术博客</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="https://chanjarster.github.io/js/bundle.273f9ac6f0.js"></script>




  </body>
</html>
