<!DOCTYPE html>

<html lang="zh-cn">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>颇忒脱的技术博客</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="https://chanjarster.github.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://chanjarster.github.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://chanjarster.github.io/favicon-16x16.png">
    <link rel="manifest" href="https://chanjarster.github.io/manifest.json">
    <link rel="mask-icon" href="https://chanjarster.github.io/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://chanjarster.github.io/css/main.min.03322cbe6bddfc28e7b17b84bc5446282a510b14b57be3371ba1f68ef1ab9ce8.css"/>

    
    
    

    
    
 
    
    
</head>
    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="https://chanjarster.github.io/">颇忒脱的技术博客</a>
    </div>  
</header>
  <div class="nav-menu">
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/">Home</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/%E6%94%B6%E8%97%8F%E5%A4%B9/">Bookmarks</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/post/jvm/index-page">JVM</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/post/concurrent-programming/index-page">并发编程</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/post/mysql/index-page">MySQL</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/go/">Go</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/gc/">GC</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/kernel/">Kernel</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/cheatsheet/">Cheatsheet</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/troubleshooting/">排障实战记录</a>
  
    <a class="color-link nav-link" href="https://github.com/chanjarster">Works</a>
  
    <a class="color-link nav-link" href="https://chanjarster.github.io/tags/">Tags</a>
  
  <a class="color-link nav-link" href="https://chanjarster.github.io/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="chanjarster" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

</div>




	<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
	<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="https://chanjarster.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
</nav>
        <div id="content" class="content-container">
        
<h1 class="post-title">Cracking Coding Interview - 6.8 The Egg Drop Problem</h1>
    
    <time>August 22, 2019</time>
    
    <div>
        <p>
        <p><strong>The Egg Drop Problem</strong>: There is a building of 100 floors. If an egg drops from the <code>Nth</code> floor or above, it will break. If it&rsquo;s dropped from any floor below, it will not break. You&rsquo;re given two eggs. Find <code>N</code>, while minimizing the number of drops for the worst case.</p>
<p>Hints: #156, #233, #294, #333, #357, #374, #395</p>
<h2 id="解法1错误">解法1（错误）</h2>
<p>有个楼一共有100层，已知当鸡蛋在&gt;= N层往下丢的时候鸡蛋会破，在 &lt; N层往下丢丢时候鸡蛋不会破。现在给你2鸡蛋，求最少丢几次能够知道这个N是几。</p>
<p>因为有100层，因此每一层的概率都是相同的：0.01</p>
<table>
<thead>
<tr>
<th>f层</th>
<th>N &lt;= f的概率</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0.01</td>
</tr>
<tr>
<td>2</td>
<td>0.02</td>
</tr>
<tr>
<td>3</td>
<td>0.03</td>
</tr>
<tr>
<td>&hellip;</td>
<td></td>
</tr>
<tr>
<td>50</td>
<td>0.50</td>
</tr>
<tr>
<td>51</td>
<td>0.51</td>
</tr>
<tr>
<td>&hellip;</td>
<td></td>
</tr>
<tr>
<td>99</td>
<td>0.99</td>
</tr>
<tr>
<td>100</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>也就是N在[1, 50]的概率是0.5，在[51, 100]的概率也是0.5，我们可以参考二分查找的办法来做：</p>
<p>所以我们要在(1 + 100) / 2 = 50层丢</p>
<ul>
<li>
<p>如果破了，那么我们得从1层开始丢，直到丢破了为止。</p>
</li>
<li>
<p>如果没破</p>
<ul>
<li>那么我们得在(51 + 100) / 2= 75层丢</li>
<li>如果破了就从51层开始丢，知道丢破为止。</li>
<li>如果没破
<ul>
<li>就在(76 + 100) / 2 = 88层丢</li>
<li>如果破了，则从76层开始丢，直到丢破为止。</li>
<li>如果没破：。。。</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">findFloor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> start<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>start <span style="color:#f92672">+</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">boolean</span> broken <span style="color:#f92672">=</span> drop<span style="color:#f92672">(</span>mid<span style="color:#f92672">);</span>
  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>broken<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 鸡蛋破了，则从start开始一层一层找
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> findFloorOneByOne<span style="color:#f92672">(</span>start<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
  <span style="color:#75715e">// 鸡蛋没破，在下一个区间找
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> findFloor<span style="color:#f92672">(</span>mid <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> end<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 暴力一层一层往上找
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">findFloorOneByOne</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> start<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> start<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>drop<span style="color:#f92672">(</span>i<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
    i<span style="color:#f92672">++;</span>
  <span style="color:#f92672">}</span>
  <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>这个解法最坏情况下要丢几次呢？50次。</p>
<h2 id="解法2错误">解法2（错误）</h2>
<p>如果我们把东西分成长度为10的若干段，那么我们这么找：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">1...10...20...30...40...50...60...70...80...90...100
</code></pre></div><ol>
<li>在10层丢，如果破了，在1～9层丢，总共丢10次</li>
<li>在20层丢，如果破了，在11～19层丢，总共丢11次</li>
<li>在30层丢，如果破了，在21～29层丢，总共丢12次</li>
<li>。。。</li>
<li>在90层丢，如果破了，在81～89层丢，总共丢18次</li>
<li>最后[91, 100]区间里不需要丢10次，我们手里还有两个蛋，可以再分割成小区间，因此肯定少于10次。</li>
</ol>
<p>所以最坏情况下丢18次。</p>
<p>公式是：f(n) = (100/n - 1) + (n - 1) = n + 100/n - 2</p>
<p>f(n)是最坏情况丢的次数，(100/n - 1)是最多丢多少次确定区间，(n - 1)是在区间内最多丢多少次确定楼层，n是区间大小。</p>
<p>后面解不出来了。</p>
<h2 id="解法2正确">解法2（正确）</h2>
<p>上面的最坏情况是随着丢的次数增加而增加的，可以表现为 丢egg1的次数 + 丢egg2的次数。因为采取的是固定宽度，因此丢egg2的次数是固定的，而丢egg1的次数又是递增的，因此总体丢的次数是递增的。</p>
<p>想一个办法弄让总丢次数恒定。比如当多丢一次egg1时，能够少丢一次egg2。</p>
<p>如果我们把楼层间隔设置为X，那么就意味着：</p>
<ol>
<li>egg1丢一次，如果破了，egg2丢X - 1次。如果没破看下面：</li>
<li>egg1再丢一次，如果破了，egg2丢X - 2次。如果没破看下面：</li>
<li>egg1再丢一次，如果破了，egg2丢X - 3次。如果没破看下面：</li>
</ol>
<p>那么就是说，egg1从X层开始丢、加X-1层、加X - 2层，直到丢到100层。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">X + (X - 1) + (x - 2) + ... + 1 = 100
                   X(X + 1) / 2 = 100
                              X = 13.65
</code></pre></div><p>因为X取整数，可以是14或者13，看选哪一个。</p>
<p>如果是14，那么是<code>14 + 13 + 12 + 11 + ... + 4=99</code>，看最后一个4，这里一共是11次丢egg1，在加上4-1次丢egg2，总共丢14次。如果答案是100层，那么丢12次就行了。</p>
<p>如果是13，那么是<code>13 + 12 + 11 + 10 + ... + 1 = 91</code>，如果答案是100，那么要丢13次egg1再加9次egg2，总共丢22次。</p>
<p>所以X是14，所以总丢次数是14次。</p>
        </p>
    </div>
    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="https://chanjarster.github.io/tags/arts">#ARTS</a>
        
            <a class="tag" href="https://chanjarster.github.io/tags/arts-a">#ARTS-A</a>
        
      
    </div>


        
        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="chanjarster" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="https://chanjarster.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
    </body>
</html>